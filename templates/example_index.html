<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wingman Demo</title>
    <script>
        // Function to send the data to Flask
        function sendDataToFlask() {
            // Get the values from the input fields
            const currentMessage = document.getElementById("current_message").value;
            const meId = document.getElementById("me_id").value;

            // The history can be dynamically built, for example as an array of previous messages
            // This is just an example of how you might define the conversation history
            const history = {
                conversation: [
                    "Hi, how are you?",
                    "I'm doing well, thanks for asking!"
                ]
            };

            // Sending data to Flask via a POST request
            fetch('/apply_rizz', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    history: history,
                    current_message: currentMessage,
                    me_id: meId
                })
            })
            .then(response => response.json())
            .then(data => {
                // Display the response from Flask in the response element
                document.getElementById("response").textContent = "Response from Flask: " + data.msg;
            })
            .catch(error => console.error('Error:', error));
        }
    </script>
</head>
<body>
    <h1>Wingman Demo</h1>

    <form id="demoForm" action="javascript:void(0);">
        <div>
            <label for="me_id">Your ID: </label>
            <input type="text" id="me_id" name="me_id" required>
        </div>
        <div>
            <label for="current_message">Current Message: </label>
            <input type="text" id="current_message" name="current_message" required>
        </div>
        <div>
            <button type="button" onclick="sendDataToFlask()">Send Data to Flask</button>
        </div>
    </form>

    <div>
        <h2>Response:</h2>
        <p id="response">Waiting for response...</p>
    </div>
</body>
</html>